<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Crowding Report" columnCount="2" pageWidth="595" pageHeight="842" columnWidth="251" columnSpacing="36" leftMargin="36" rightMargin="20" topMargin="30" bottomMargin="30">
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="60"/>
	<property name="ireport.y" value="144"/>
	<style name="Heading 4" fontSize="12" isBold="true" isItalic="true"/>
	<style name="Heading 2" fontSize="14" isBold="true" isItalic="true"/>
	<style name="Heading 1" fontSize="16" isBold="true"/>
	<style name="Default"/>
	<parameter name="totalAvailableTime" class="java.lang.String"/>
	<parameter name="title" class="java.lang.String"/>
	<parameter name="subtitle" class="java.lang.String"/>
	<parameter name="seasonStart" class="java.lang.String" isForPrompting="false"/>
	<parameter name="seasonEnd" class="java.lang.String"/>
	<field name="executive" class="java.lang.String"/>
	<field name="status" class="java.lang.String"/>
	<variable name="complete" class="java.lang.Integer" resetType="Group" resetGroup="executive" calculation="Sum">
		<variableExpression><![CDATA[($F{status}.compareTo("COMPLETE") == 0 ) ? 1 : 0]]></variableExpression>
		<initialValueExpression><![CDATA[new java.lang.Integer(0)]]></initialValueExpression>
	</variable>
	<variable name="inprogress" class="java.lang.Integer" resetType="Group" resetGroup="executive" calculation="Sum">
		<variableExpression><![CDATA[($F{status}.compareTo("INCOMPLETE") == 0 ) ? 1 : 0]]></variableExpression>
		<initialValueExpression><![CDATA[new java.lang.Integer(0)]]></initialValueExpression>
	</variable>
	<variable name="notstarted" class="java.lang.Integer" resetType="Group" resetGroup="executive" calculation="Sum">
		<variableExpression><![CDATA[($F{status}.compareTo("NOT_STARTED") == 0 ) ? 1 : 0]]></variableExpression>
		<initialValueExpression><![CDATA[new java.lang.Integer(0)]]></initialValueExpression>
	</variable>
	<variable name="totalPerExec" class="java.lang.Integer" resetType="Group" resetGroup="executive" calculation="Sum">
		<variableExpression><![CDATA[1]]></variableExpression>
		<initialValueExpression><![CDATA[new java.lang.Integer(0)]]></initialValueExpression>
	</variable>
	<group name="executive">
		<groupExpression><![CDATA[$F{executive}]]></groupExpression>
		<groupHeader>
			<band height="38">
				<textField>
					<reportElement style="Heading 4" x="0" y="0" width="70" height="19"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{executive}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="85" y="19" width="88" height="19"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Number of Projects]]></text>
				</staticText>
				<staticText>
					<reportElement x="185" y="19" width="60" height="19"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Percentage]]></text>
				</staticText>
				<staticText>
					<reportElement x="0" y="19" width="80" height="19"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Status]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="83">
				<rectangle>
					<reportElement x="0" y="51" width="250" height="15"/>
				</rectangle>
				<staticText>
					<reportElement x="0" y="1" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Completed]]></text>
				</staticText>
				<textField>
					<reportElement x="85" y="1" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$V{complete}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="224" y="1" width="26" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[%]]></text>
				</staticText>
				<staticText>
					<reportElement x="224" y="17" width="26" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[%]]></text>
				</staticText>
				<staticText>
					<reportElement x="0" y="17" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[In progress]]></text>
				</staticText>
				<textField>
					<reportElement x="85" y="17" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$V{inprogress}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="224" y="34" width="26" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[%]]></text>
				</staticText>
				<staticText>
					<reportElement x="0" y="34" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[Not started]]></text>
				</staticText>
				<textField>
					<reportElement x="85" y="34" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$V{notstarted}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="53" width="74" height="15"/>
					<textElement>
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Total]]></text>
				</staticText>
				<textField>
					<reportElement x="85" y="53" width="74" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$V{totalPerExec}]]></textFieldExpression>
				</textField>
				<textField pattern="##0.0">
					<reportElement x="185" y="1" width="39" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Double"><![CDATA[$V{complete}.doubleValue() *100 / $V{totalPerExec}.doubleValue()]]></textFieldExpression>
				</textField>
				<textField pattern="##0.0">
					<reportElement x="185" y="17" width="39" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Double"><![CDATA[$V{inprogress}.doubleValue()  *100/ $V{totalPerExec}.doubleValue()]]></textFieldExpression>
				</textField>
				<textField pattern="##0.0">
					<reportElement x="185" y="34" width="39" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression class="java.lang.Double"><![CDATA[$V{notstarted}.doubleValue()  *100/ $V{totalPerExec}.doubleValue()]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="-2" width="250" height="1"/>
				</line>
				<staticText>
					<reportElement x="224" y="53" width="26" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[%]]></text>
				</staticText>
				<staticText>
					<reportElement x="185" y="53" width="26" height="15"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<text><![CDATA[100]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="status">
		<groupExpression><![CDATA[$F{status}]]></groupExpression>
	</group>
	<title>
		<band height="67">
			<image>
				<reportElement x="0" y="0" width="43" height="52"/>
				<imageExpression class="java.lang.String"><![CDATA["alma/scheduling/psm/reports/images/alma-logo.jpg"]]></imageExpression>
			</image>
			<staticText>
				<reportElement mode="Opaque" x="308" y="0" width="88" height="18" forecolor="#010101" backcolor="#7A87CD"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Hours in Season:]]></text>
			</staticText>
			<textField pattern="#,##0.0#;(#)">
				<reportElement mode="Opaque" x="396" y="0" width="143" height="18" forecolor="#010101" backcolor="#7A87CD"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[Double.parseDouble($P{totalAvailableTime})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Heading 1" mode="Opaque" x="53" y="0" width="243" height="28" forecolor="#C5C5C5" backcolor="#00026F"/>
				<textElement verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Planning Mode Simulator]]></text>
			</staticText>
			<textField>
				<reportElement style="Heading 1" mode="Opaque" x="53" y="28" width="243" height="24" forecolor="#FEFEFE" backcolor="#00026F"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font size="11" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{title}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="55" width="539" height="1" forecolor="#1A0067"/>
				<graphicElement>
					<pen lineWidth="1.75"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement mode="Opaque" x="308" y="18" width="88" height="14" forecolor="#010101" backcolor="#7A87CD"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Season starts:]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="308" y="32" width="88" height="20" forecolor="#010101" backcolor="#7A87CD"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Season ends:]]></text>
			</staticText>
			<textField pattern="">
				<reportElement mode="Opaque" x="396" y="18" width="143" height="14" forecolor="#010101" backcolor="#7A87CD"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{seasonStart}]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement mode="Opaque" x="396" y="32" width="143" height="20" forecolor="#010101" backcolor="#7A87CD"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{seasonEnd}]]></textFieldExpression>
			</textField>
			<rectangle>
				<reportElement x="302" y="0" width="6" height="52" backcolor="#7A87CD"/>
				<graphicElement>
					<pen lineWidth="0.0" lineStyle="Double"/>
				</graphicElement>
			</rectangle>
			<rectangle>
				<reportElement x="47" y="0" width="6" height="52" backcolor="#00026F"/>
				<graphicElement>
					<pen lineWidth="0.0" lineStyle="Double"/>
				</graphicElement>
			</rectangle>
		</band>
	</title>
	<pageHeader>
		<band height="33">
			<textField>
				<reportElement style="Heading 2" mode="Opaque" x="0" y="0" width="539" height="24" forecolor="#FEFEFE" backcolor="#00026F"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{subtitle}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<pageFooter>
		<band height="50">
			<textField>
				<reportElement x="199" y="9" width="80" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="282" y="9" width="40" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="0" width="539" height="1" forecolor="#1A0067"/>
				<graphicElement>
					<pen lineWidth="1.75"/>
				</graphicElement>
			</line>
		</band>
	</pageFooter>
	<summary>
		<band height="187">
			<staticText>
				<reportElement x="0" y="29" width="539" height="148"/>
				<textElement textAlignment="Justified">
					<font isBold="false"/>
				</textElement>
				<text><![CDATA[Status indicates how, at the end of simulation, the project finished.
"Completed" means that according to progress on the observation project, the project was fully observed.
"In progress" indicates that some scheduling blocks are still pending for completion.
"Not started" shows how many project where not even started.

The column "Number of Projects", shows how many observing projects fall into each of the above categories.
Percentage column indicates how many of the total number of observation projects per executive, fall into each of the categories, compared to the total of project of a certain executive.]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="5" width="250" height="20"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Explanation of the report]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
