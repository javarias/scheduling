<?xml version="1.0" encoding="UTF-8"?>
<!--
@(#) $Id: Generic.xml,v 1.2 2006/02/21 17:08:42 sslucero Exp $

Copyright (C) 2005
Associated Universities, Inc. Washington DC, USA.

Produced for the ALMA project

This library is free software; you can redistribute it and/or modify
it it under the terms of the GNU Library General Public License as
published by the Free Software Foundation; either version 2 of the
License, or (at your option) any later version.

This library is distributed in the hope that it will be useful but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Library General Public License for more details.

You should have received a copy of the GNU Library General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 675 Massachusetts Ave, Cambridge, MA, 02139, USA.

Correspondence concerning ALMA should be addressed as follows:
Internet email: alma-sw-admin@nrao.edu
-->

<!--
Note if you edit this please do not stuff up the formatting! Many
automated tools, like the CDB browser or XMLSpy will want to convert
all indents to tabs. As I use a text editor I then find I need an
extremely widescreen window. - Ralph Marson. 
-->

<OpticalTelescope xmlns="urn:schemas-cosylab-com:OpticalTelescope:1.0" 
                  xmlns:amb="urn:schemas-cosylab-com:AmbDevice:1.0"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <incidentLight
    initialize="false"
    alarm_high_on="2.6"
    alarm_high_off="2.6"
    alarm_low_on="0.0"
    alarm_low_off="0.0"
    alarm_timer_trig="1.0"
    min_delta_trig="0.00488281"
    default_value="2.5"
    graph_min="-0.5"
    graph_max="3.0"
    min_step="0.00488281"
    archive_delta="0.0"
    format="%5.2f"
    description="Measure of the incident light"
    units="Volts"
    resolution="1023"
    archive_priority="15"
    archive_min_int="60.0"
    archive_max_int="60.0"
    default_timer_trig="60.0"
    min_timer_trig="0.048"
    >
    <amb:rcaMap relative_address="2" data_length="2">
      <amb:linearBitMap numberOfBits="10" fieldWidth="16" 
                        scale= "0.00488281"/>
    </amb:rcaMap>
  </incidentLight>

  <lightThreshold
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    alarm_high_on="2.5"
    alarm_high_off="2.5"
    alarm_low_on="0.0"
    alarm_low_off="0.0"
    default_value="2.5"
    graph_min="-0.5"
    graph_max="3.0"
    format="%f"
    description="Threshold for automatic shutter closure"
    units="Volts"
    min_timer_trig="0.048"
    min_delta_trig="0.001"
    default_timer_trig="60.0"
    resolution="1023"
    min_step="0.001"
    alarm_timer_trig="1.0"
    >
    <amb:rcaMap relative_address="7" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </lightThreshold>

  <setLightThreshold
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    >
    <amb:rcaMap relative_address="4102" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </setLightThreshold>

  <setFocus
    archive_priority="15"
    archive_min_int="180.0"
    archive_max_int="180.0"
    archive_delta="0.0"
    default_value="0.0"
    graph_min="-5E-3"
    graph_max="+5E-3"
    format="%f"
    description="Set focus position"
    units="meters"
    min_timer_trig="0.048"
    min_delta_trig="1E-6"
    default_timer_trig="60.0"
    resolution="1023"
    min_step="1E-6"
    initialize="false"
    min_value="-3E-3"
    max_value="3E-3"
    >
    <amb:rcaMap relative_address="4103" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32" 
                               scale="1E-6"/>
    </amb:rcaMap>
  </setFocus>

  <getFocus
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    >
<!-- This does have the *same* RCA as the setFocus property -->
    <amb:rcaMap relative_address="4103" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32"
                               scale="1E-6"/>
    </amb:rcaMap>
  </getFocus>

  <upperFocusLimitReached>
    <amb:rcaMap relative_address="8" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="7"/>
    </amb:rcaMap>
  </upperFocusLimitReached>

  <lowerFocusLimitReached>
    <amb:rcaMap relative_address="8" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </lowerFocusLimitReached>

  <openShutter>
    <amb:rcaMap relative_address="4097" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </openShutter>

  <openShutterCmd>
<!-- This does have the *same* RCA as the openShutter property -->
    <amb:rcaMap relative_address="4097" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </openShutterCmd>

  <shutterPosition>
    <amb:rcaMap relative_address="1" data_length="1">
      <amb:enumBitMap numberOfBits="2" fieldWidth="8">
        <amb:enumType enumName="OPEN"      enumValue="0" enumData="1"/>
        <amb:enumType enumName="CLOSED"    enumValue="1" enumData="2"/>
        <amb:enumType enumName="IN_MOTION" enumValue="2" enumData="0"/>
        <amb:enumType enumName="UNDEFINED" enumValue="3" enumData="3"/>
      </amb:enumBitMap>
    </amb:rcaMap>
  </shutterPosition>

  <useSolarFilter>
    <amb:rcaMap relative_address="4098" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8" negativeLogic="true"/>
    </amb:rcaMap>
  </useSolarFilter>

  <useSolarFilterCmd>
<!-- This does have the *same* RCA as the useSolarFilter property -->
    <amb:rcaMap relative_address="4098" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8" negativeLogic="true"/>
    </amb:rcaMap>
  </useSolarFilterCmd>

  <solarFilterPosition>
    <amb:rcaMap relative_address="1" data_length="1">
      <amb:enumBitMap numberOfBits="2" fieldWidth="6">
        <amb:enumType enumName="OPEN"      enumValue="0" enumData="1"/>
        <amb:enumType enumName="CLOSED"    enumValue="1" enumData="2"/>
        <amb:enumType enumName="IN_MOTION" enumValue="2" enumData="0"/>
        <amb:enumType enumName="UNDEFINED" enumValue="3" enumData="3"/>
      </amb:enumBitMap>
    </amb:rcaMap>
  </solarFilterPosition>

  <useIRFilter>
    <amb:rcaMap relative_address="4099" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </useIRFilter>

  <useIRFilterCmd>
<!-- This does have the *same* RCA as the useIRFilter property -->
    <amb:rcaMap relative_address="4099" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </useIRFilterCmd>

  <IRFilterPosition>
    <amb:rcaMap relative_address="1" data_length="1">
      <amb:enumBitMap numberOfBits="2" fieldWidth="4">
        <amb:enumType enumName="OPEN"      enumValue="0" enumData="1"/>
        <amb:enumType enumName="CLOSED"    enumValue="1" enumData="2"/>
        <amb:enumType enumName="IN_MOTION" enumValue="2" enumData="0"/>
        <amb:enumType enumName="UNDEFINED" enumValue="3" enumData="3"/>
      </amb:enumBitMap>
    </amb:rcaMap>
  </IRFilterPosition>

  <enablePowerSupply
    archive_delta="0"
    archive_max_int="1.0"
    archive_min_int="300.0"
    archive_priority="15"
    default_timer_trig="60.0"
    default_value="0"
    description="True if the power supply is on"
    format="%d"
    graph_max="2"
    graph_min="-1"
    initialize="false"
    max_value="1"
    min_timer_trig="0.048"
    min_value="0"
    resolution="1"
    >
    <amb:rcaMap relative_address="4100" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </enablePowerSupply>

  <commandedPowerSupplyOn
    initialize="false"
    archive_delta="0"
    archive_max_int="1.0"
    archive_min_int="300.0"
    archive_priority="15"
    default_timer_trig="60.0"
    default_value="0"
    description="True if the power supply is on"
    format="%d"
    graph_max="2"
    graph_min="-1"
    min_timer_trig="0.048"
    resolution="1"
    alarm_off="0,1"
    alarm_timer_trig="300.0"
    >
<!-- This does have the *same* RCA as the enablePowerSupply property -->
    <amb:rcaMap relative_address="4100" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </commandedPowerSupplyOn>

  <powerSupplyOn
    initialize="false"
    archive_delta="0"
    archive_max_int="1.0"
    archive_min_int="300.0"
    archive_priority="15"
    default_timer_trig="60.0"
    default_value="0"
    description="True if the power supply is on"
    format="%d"
    graph_max="2"
    graph_min="-1"
    min_timer_trig="0.048"
    resolution="1"
    alarm_off="0,1"
    alarm_timer_trig="300.0"
    >
    <amb:rcaMap relative_address="1" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="2"/>
    </amb:rcaMap>
  </powerSupplyOn>

  <enableHeater
    archive_delta="0"
    archive_max_int="1.0"
    archive_min_int="300.0"
    archive_priority="15"
    default_timer_trig="60.0"
    default_value="0"
    description="True if the heater is on"
    format="%d"
    graph_max="2"
    graph_min="-1"
    initialize="false"
    max_value="1"
    min_timer_trig="0.048"
    min_value="0"
    resolution="1"
    >
    <amb:rcaMap relative_address="4101" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </enableHeater>

  <commandedHeaterOn
    initialize="false"
    archive_delta="0"
    archive_max_int="1.0"
    archive_min_int="300.0"
    archive_priority="15"
    default_timer_trig="60.0"
    default_value="0"
    description="True if the heater has been commanded to go on"
    format="%d"
    graph_max="2"
    graph_min="-1"
    min_timer_trig="0.048"
    resolution="1"
    alarm_off="0,1"
    alarm_timer_trig="300.0"
    >
<!-- This does have the *same* RCA as the enableHeater property -->
    <amb:rcaMap relative_address="4101" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="8"/>
    </amb:rcaMap>
  </commandedHeaterOn>

  <heaterOn
    initialize="false"
    archive_delta="0"
    archive_max_int="1.0"
    archive_min_int="300.0"
    archive_priority="15"
    default_timer_trig="60.0"
    default_value="0"
    description="True if the heater is on"
    format="%d"
    graph_max="2"
    graph_min="-1"
    min_timer_trig="0.048"
    resolution="1"
    alarm_off="0,1"
    alarm_timer_trig="300.0"
    >
    <amb:rcaMap relative_address="1" data_length="1">
      <amb:booleanBitMap numberOfBits="1" fieldWidth="1"/>
    </amb:rcaMap>
  </heaterOn>

  <temperature1
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    >
    <amb:rcaMap relative_address="5" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </temperature1>

  <temperature2
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    >
    <amb:rcaMap relative_address="6" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </temperature2>

  <ccdTemperature
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    >
    <amb:rcaMap relative_address="4" data_length="2">
      <amb:linearBitMap numberOfBits="10" fieldWidth="16" 
                        scale= "0.488281" offset="-50"/>
    </amb:rcaMap>
  </ccdTemperature>

  <tubeTemperature
    archive_priority="15"
    archive_min_int="300.0"
    archive_max_int="300.0"
    archive_delta="0.0"
    >
    <amb:rcaMap relative_address="3" data_length="4">
      <amb:floatingPointBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </tubeTemperature>


  <errors
    archive_priority="15"
    archive_min_int="60.0"
    archive_max_int="60.0"
    archive_delta="0"
    graph_min="0"
    graph_max="10000000"
    format="%d"
    description="Number of AMB errors since last reset"
    units="counts"
    min_timer_trig="0.048"
    min_delta_trig="1"
    default_timer_trig="60.0"
    min_step="1"
    alarm_timer_trig="1.0"
    >
    <amb:rcaMap relative_address="196609" data_length="4">
      <amb:linearBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </errors>
  <transactions
    archive_priority="15"
    archive_min_int="60.0"
    archive_max_int="60.0"
    archive_delta="0"
    graph_min="0"
    graph_max="10000000"
    format="%d"
    description="Number of AMB transactions since last reset"
    units="transactions"
    min_timer_trig="0.048"
    min_delta_trig="1"
    default_timer_trig="60.0"
    min_step="1"
    alarm_timer_trig="1.0"
    >
    <amb:rcaMap relative_address="196610" data_length="4">
      <amb:linearBitMap numberOfBits="32" fieldWidth="32"/>
    </amb:rcaMap>
  </transactions>
  <temperature
    archive_priority="15" 
    archive_min_int="60.0"
    archive_max_int="60.0"
    archive_delta="0.0"
    alarm_high_on="30.0"
    alarm_high_off="28.0"
    alarm_low_on="0.0"
    alarm_low_off="2.0"
    default_value="-1.0"
    graph_min="-10.0"
    graph_max="40.0"
    format="%6.1f"
    description="Ambient Temperature on the AMBSI"
    units="degrees C"
    min_timer_trig="0.048"
    min_delta_trig="0.5"
    default_timer_trig="60.0"
    resolution="65535"
    min_step="0.5"
    alarm_timer_trig="1.0"
    >
    <amb:rcaMap relative_address="196611" data_length="4">
      <amb:ds1820TempBitMap/>
    </amb:rcaMap>
  </temperature>
  <Address/>
</OpticalTelescope>
